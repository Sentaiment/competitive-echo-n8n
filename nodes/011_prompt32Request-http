{
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.anthropic.com/v1/messages",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "anthropicApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "anthropic-version",
              "value": " 2023-06-01"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({\n  model: \"claude-3-7-sonnet-20250219\",\n  max_tokens: 7500,\n  temperature: 0.2,\n  system: \"You are a competitive intelligence analyst. You must provide structured competitor analysis with specific rankings and scores. Always include a competitors_ranked array with company names and numerical scores. Include comprehensive research from traditional business sources, industry reports, and social media platforms.\",\n  messages: [{ \n    role: \"user\", \n    content: \"COMPETITIVE SCENARIO ANALYSIS\\n\\nScenario: \" + $json.scenario_title + \"\\nQuery: \" + $json.user_query + \"\\n\\nREQUIREMENTS:\\n1. Identify 3-5 key competitors for this scenario\\n2. Rank them with numerical scores (1-10 scale)\\n3. Provide specific analysis for each competitor\\n4. Include citations and sources from COMPREHENSIVE SOURCE TYPES:\\n   - Traditional business sources: Forbes, industry reports, company websites, business publications, trade journals, analyst reports\\n   - Social media sources: Reddit discussions, YouTube reviews, Twitter/X posts, Instagram content, TikTok videos, Facebook groups, Quora answers, Medium articles\\n   - Community feedback: User experiences, reviews, social sentiment, forums\\n5. Structure your response as JSON with these fields:\\n   - title: \\\"Clear, descriptive title for this analysis\\\"\\n   - description: \\\"Brief summary of what this analysis covers\\\"\\n   - competitors_ranked: [{\\\"company\\\": \\\"Name\\\", \\\"score\\\": 8.5, \\\"rationale\\\": \\\"Why this score\\\"}]\\n   - analysis_details: {\\n       \\\"Company Name\\\": {\\n         \\\"summary\\\": \\\"Brief overview\\\",\\n         \\\"highlights\\\": [\\\"Key point 1\\\", \\\"Key point 2\\\"],\\n         \\\"metrics\\\": {\\\"strength\\\": 8, \\\"weakness\\\": 3}\\n       }\\n     }\\n   - key_findings: [\\\"Finding 1\\\", \\\"Finding 2\\\"]\\n   - sources: [\\\"Source 1\\\", \\\"Source 2\\\"]\\n\\nCRITICAL COMPETITOR FOCUS:\\nYou MUST focus ONLY on these specific competitors: \" + ($json.whitelist ? $json.whitelist.join(\", \") : \"Wynn Las Vegas, The Venetian, MGM Grand, Fontainebleau Las Vegas\") + \".\\n\\nDo NOT include any other companies in your analysis. If you find other companies mentioned in social media sources, use them only as context for analyzing the specified competitors.\\n\\nSOURCE REQUIREMENTS:\\n- Include BOTH traditional business sources AND social media sources\\n- For social media sources, provide EXACT links to specific posts, not just general site links\\n- Include traditional sources: Forbes Travel Guide, industry reports, company websites, business publications, trade journals, analyst reports\\n- Include social media sources with specific post URLs: Reddit thread links, YouTube video links, Twitter post links, Instagram post links, TikTok video links, Facebook post links, Quora answer links, Medium article links\\n- MANDATORY: Include at least 3-5 traditional business sources\\n- MANDATORY: Include at least 2-3 social media sources with exact post URLs\\n- Use the most relevant sources for this specific scenario, not just generic ones\\n- Research the most appropriate platforms and communities for this specific industry and scenario\\n\\nFocus on \" + ($json.whitelist ? $json.whitelist.join(\", \") : \"Wynn Las Vegas, The Venetian, MGM Grand, Fontainebleau Las Vegas\") + \" as the main competitors for this specific scenario.\"\n  }]\n}) }}",
        "options": {
          "retry": {
            "enabled": true,
            "maxRetries": 3,
            "retryDelay": 2000
          },
          "timeout": 60000,
          "response": {
            "response": {
              "neverError": true,
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2128,
        32
      ],
      "id": "06891aad-65f1-4dd1-9b30-1c856ef81a44",
      "name": "011_prompt32Request-http",
      "credentials": {
        "anthropicApi": {
          "id": "1jk5Er35vKWwOaad",
          "name": "Anthropic account"
        }
      }
    }
  ],
  "connections": {
    "011_prompt32Request-http": {
      "main": [
        []
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "e627ba3cf413f5c8fbbcb0c34adbe72399de282a282eb839e23356d673f567eb"
  }
}
